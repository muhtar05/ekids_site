{% load common_tags %}
{% with product.reviews.approved.all as reviews_approved %}
<h2 class="tabs-content-title">–û—Ç–∑—ã–≤—ã / <span class="color-blue">{{ reviews_approved|length }}</span>
    <button class="js-fancy  add_review_btn  btn  btn-white  btn-md" data-fancybox-href="#addreview_form"
            type="button">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
    </button>
</h2>

<div class="reviews">
    {% if reviews_approved|length == 0 %} <p>–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –µ—â—ë –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º–∏!</p> {% endif %}
    {% for review in product.reviews.approved.all %}
        <div class="reviews-item">
        <div class="row">
            <div class="col-md-3  col-sm-12">
                <div class="row">
                    <div class="col-md-12  col-sm-3">
                        <div class="reviews-item-author"><b>–ê–≤—Ç–æ—Ä</b>: <span class="color-blue">{{ review.reviewer_name }}</span>
                        </div>
                        <div class="reviews-item-author"><b>–í–æ–∑—Ä–∞—Å—Ç —Ä–µ–±–µ–Ω–∫–∞</b>: {{ review.age_child }}</div>
                        <div class="reviews-item-date">{{ review.date_created }}</div>
                    </div>
                    <div class="col-md-12 col-sm-4">
                        <div class="reviews-item-author">
                            <b>–ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:</b>
                            <div class="reviews-item-rating-stars">
                                {% for c in 1|range:6 %}
                                    {% if c <= review.workmanship_score %}
                                        <i class="ico ico-star-color"></i>
                                    {% else %}
                                        <i class="ico ico-star"></i>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-sm-4">
                        <div class="reviews-item-author">
                            <b>–£–¥–æ–±—Å—Ç–≤–æ —ç–∫—Å–ø—É–∞—Ç–∞—Ü–∏–∏:</b>
                            <div class="reviews-item-rating-stars">
                                {% for c in 1|range:6 %}
                                    {% if c <= review.service_ability_score %}
                                        <i class="ico ico-star-color"></i>
                                    {% else %}
                                        <i class="ico ico-star"></i>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-9  col-sm-12">
                <p class="reviews-text-item">
                    <b><i class="ico ico-smile"></i> –í–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è:</b>
                    {{ review.impression  }}
                </p>
                <p class="reviews-text-item">
                    <b><i class="ico ico-cplus"></i> –î–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞:</b>
                    {{ review.dignity }}
                </p>
                <p class="reviews-text-item">
                    <b><i class="ico ico-cminus"></i> –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:</b>
                    {{ review.limitations }}
                </p>
                <p class="reviews-text-item">
                    <b><i class="ico ico-ccomment"></i> –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</b>
                    {{ review.body }}
                </p>
                <div class="reviews-comments">
                    <h3 class="reviews-comments-title">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ / <span class="color-blue">{{ review.comments.count }}</span></h3>
                    <div class="reviews-comments-items">
                        {% for r_comment in review.comments.all %}
                            <div class="reviews-comments-item">
                            <div class="reviews-comments-info">
                                            <span class="reviews-comments-info-item"><b>–ê–≤—Ç–æ—Ä:</b>
                                                <span class="color-blue">{{ r_comment.reviewer_name }}</span>
                                            </span>
                                <!-- <span class="reviews-comments-info-item"><b>–î–µ—Ç–∏:</b>  5-6 –ª–µ—Ç</span> -->
                                <span class="reviews-comments-info-item">{{ r_comment.date_created }}</span>
                            </div>
                            <div class="reviews-comments-text">{{ r_comment.body }}</div>
                        </div>
                        {% endfor %}
                    </div>
                    {% if request.user.is_authenticated %}
                        <form class="reviews-comments-form" id="review-comment-form" action="{% url 'catalogue:add-comment' product_slug=product.slug product_pk=product.id %}" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="{{ form_comment.review.html_name }}" value="{{ review.pk }}">
                            <textarea name="{{ form_comment.body.html_name }}" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"></textarea>
                            <button class="btn  btn-xs" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                        </form>

                        <div class="reviews-commentbtn">
                            <button class="js-show-comment-form  btn  btn-xs  btn-grey" type="button">
                                –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
                            </button>
                        </div>
                    {% else %}
                        <div>–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –¥–∞–Ω–Ω–æ–º—É –æ—Ç–∑—ã–≤—É. <a href="#login" class="js-fancy">–í–æ–π–¥–∏—Ç–µ</a> –∏–ª–∏ <a href="/accounts/register/" target="_blank">–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a></div>
                    {% endif %}
                </div>

            </div>
        </div>
    </div>
    {% endfor %}
</div>

{#<div class="text-center">#}
{#    <a class="btn btn-white" href="">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –æ—Ç–∑—ã–≤—ã</a>#}
{#</div>#}

{% endwith %}
<div class="hidden">
    <div id="addreview_form">
        <div class="addreview_form">
            <h3 class="addreview_form-title"><span class="color-blue">–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å</span> <span
                    class="color-pink">—Å–≤–æ–∏–º–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º–∏</span></h3>
            {% if request.user.is_authenticated %}
                <div class="addreview_form-text">
                    <p>–ó–Ω–∞–µ–º, —á—Ç–æ –∑–∞–ø–æ–ª–Ω—è—Ç—å –º–Ω–æ–≥–æ <span class="color-blue">üò•</span>, –Ω–æ —ç—Ç–∏–º –≤—ã –ø–æ–º–æ–∂–µ—Ç–µ –¥—Ä—É–≥–∏–º
                        –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è —Å –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–º –≤—ã–±–æ—Ä–æ–º <span class="color-pink">üòâ</span>.</p>
                    <p>–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –æ—Ç–∑—ã–≤ –∏ —É–¥–µ–ª—ë–Ω–Ω–æ–µ –≤—Ä–µ–º—è!</p>
                </div>
                <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è-->
                <form id="form_review" action="{% url 'catalogue:reviews-add' product_slug=product.slug product_pk=product.id %}" method="post">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-row">

                                <input type="text" placeholder="–í–∞—à–µ –∏–º—è" name="name" >
                            </div>
                            <div class="form-row">
                                <input type="text" placeholder="–í–æ–∑—Ä–∞—Å—Ç –¥–µ—Ç–µ–π" name="{{ form_review.age_child.html_name }}">
                            </div>

                            <div class="addreview_form-rating">
                                <div class="addreview_form-rating-name">–ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:</div>
                                <div class="rating">
                                    <span data-rating="5">&#9733;</span>
                                    <span data-rating="4">&#9733;</span>
                                    <span data-rating="3">&#9733;</span>
                                    <span data-rating="2">&#9733;</span>
                                    <span data-rating="1">&#9733;</span>
                                    <input class="rating-val" type="hidden" name="{{ form_review.workmanship_score.html_name  }}">
                                </div>
                            </div>

                            <div class="addreview_form-rating">
                                <div class="addreview_form-rating-name">–£–¥–æ–±—Å—Ç–≤–æ —ç–∫—Å–ø—É–∞—Ç–∞—Ü–∏–∏:</div>
                                <div class="rating">
                                    <span data-rating="5">&#9733;</span>
                                    <span data-rating="4">&#9733;</span>
                                    <span data-rating="3">&#9733;</span>
                                    <span data-rating="2">&#9733;</span>
                                    <span data-rating="1">&#9733;</span>
                                    <input class="rating-val" type="hidden" name="{{ form_review.service_ability_score.html_name }}">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-row">
                                <input type="text" placeholder="–í–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ —Ä–µ–±—ë–Ω–∫–∞ –æ—Ç –ø–æ–∫—É–ø–∫–∏" name="{{ form_review.impression.html_name }}">
                            </div>
                            <div class="form-row">
                                <input type="text" placeholder="–î–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞" name="{{ form_review.dignity.html_name }}">
                            </div>
                            <div class="form-row">
                                <input type="text" placeholder="–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–∞" name="{{ form_review.limitations.html_name }}">
                            </div>
                            <div class="form-row">
                                <textarea placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ —Ç–æ–≤–∞—Ä–µ" name="{{ form_review.body.html_name }}"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <button class="btn" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
                    </div>
                </form>
            {% else %}
                <div>–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –∫ –¥–∞–Ω–Ω–æ–º—É —Ç–æ–≤–∞—Ä—É. <a href="#login" class="js-fancy">–í–æ–π–¥–∏—Ç–µ</a> –∏–ª–∏ <a href="/accounts/register/" target="_blank">–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a></div>
            {% endif %}
            <!-- –ö–æ–Ω–µ—Ü —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è-->
        </div>
    </div>
</div>
